{"data":{"site":{"siteMetadata":{"title":"La gaceta de la cabeza","author":"Joaquín Bravo Contreras","disqusShortname":"gaceta-de-la-cabeza"}},"markdownRemark":{"id":"d4da899a-ecec-5ce2-9ee8-c68bc8bb0c4b","excerpt":"Instalar los programas básicos Todos los desarrolladores de portales Drupal de axai tendran que tener instalado una serie de programas para…","html":"<h2>Instalar los programas básicos</h2>\n<p>Todos los desarrolladores de portales Drupal de axai tendran que tener instalado una serie de programas para poder correr de manera satisfactoria el CMS. <a href=\"https://httpd.apache.org/\">Apache</a> o <a href=\"http://wiki.nginx.org/Main\">nginx</a> como servidores web. MySQL o <a href=\"https://mariadb.org/\">MariaDB</a> como base de datos y PHP instalados. Nosotros utilizamos nginx porque es más ligero y rápido que apache. Si tienes la curiosidad, también puedes utilizar MariaDB en lugar de MySQL, aunque estas instrucciones usas mysql al instalar, pero lo demás es igualito para ambos. Y además necesitas instalar <a href=\"http://git-scm.com/\">git</a> que se utiliza para descargar muchos programas y además para llevar un control de versiones de nuestros sitios de drupal. Y finalmente también necesitas un buen editor de texto. Te recomendamos vi (este es un buen tutorial: <a href=\"http://www.gentoo.org/doc/es/vi-guide.xml\">http://www.gentoo.org/doc/es/vi-guide.xml</a>), pero hay otros como gedit (si instalaste gnome o ubuntu) o scite (si instalaste lubuntu u otro sistema operativo ligero).</p>\n<p>En Ubuntu es necesario ejecutar los siguientes comando en consola para instalarlos. <strong>Para tus sitios de desarrollo te recomendamos poner una contraseña en blanco para mysql. Pero nunca hagas esto en producción</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">sudo apt-get install nginx\nsudo apt-get install mysql-server\nsudo apt-get install php5-cli php5-fpm php5-mysql php5-gd php5-curl php5-sqlite php5-tidy php5-imagick\nsudo apt-get install git tig\nsudo apt-get install vim-gtk</code></pre>\n      </div>\n<p>PHP por default viene con un límite de memoria muy pequeño (16MB). Por lo que es necesario aumentarlo para casi cualquier aplicación. Te recomendamos poner un límite de 128M o más en tu computadora editando los archivos php.ini que puedas tener en /etc/php5/fpm o /etc/php5/cli o /etc/php5/cgi y cambiando la variable <strong>memory_limit</strong>.</p>\n<p>Y finalmente solo asegúrate que mysql, nginx y php-fpm estén corriendo</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">sudo /etc/init.d/nginx status\nsudo /etc/init.d/mysql status\nsudo /etc/init.d/php5-fpm status</code></pre>\n      </div>\n<p>Si alguno no está corriendo, puedes cambiar <code class=\"language-text\">status</code> por <code class=\"language-text\">start</code>.</p>\n<h2>Drush</h2>\n<p>Para ayudar al desarrollo de portales en drupal utilizamos el programa <code class=\"language-text\">drush</code> que se puede descargar desde <a href=\"https://github.com/drush-ops/drush\">https://github.com/drush-ops/drush</a>. Recomendamos utilizar la instalación manual:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">cd /home/usuario\ngit clone https://github.com/drush-ops/drush.git\nsudo ln -s /home/usuario/drush/drush /usr/bin/drush</code></pre>\n      </div>\n<p>Para comprobar que drush corre correctamente lanza el comando <code class=\"language-text\">drush --version</code></p>\n<h2>Estructura para carpetas de drupal</h2>\n<p>Los sitios de drupal los podemos poner todos en un mismo folder. La estructura que recomendamos es:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">/home/usuario/work\n  /drupal-sites\n    /sitio1\n      /drupal\n    /sitio2\n      /drupal\n    /sitio3\n      /drupal</code></pre>\n      </div>\n<p>Esto para que cada carpeta de sitios tenga una carpeta drupal con la instalación de drupal, y además fuera de la carpeta de drupal puedan existir backups de la base de datos, archivos de diseño, documentación y otros archivos que no necesitan verse desde el sitio web. Vamos a crear esta estructura. El comando <code class=\"language-text\">mkdir -p</code> crea carpetas y si la carpeta padre no existe la crea también. Y después podemos descargar ahí la última versión de drupal:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">mkdir -p /home/usuario/work/drupal-sites/sitio1\ncd /home/usuario/work/drupal-sites/sitio1\ndrush dl drupal</code></pre>\n      </div>\n<p>Al final debes tener una carpeta drupal-7.x. Te recomendamos renombrar esa carpeta como drupal para facilitar los siguientes pasos (<code class=\"language-text\">mv drupal-7.x drupal</code>).</p>\n<h2>Configurar nginx</h2>\n<p>Enseguida se tiene que configurar drupal en nginx. Para esto podemos utilizar la configuración de <a href=\"https://github.com/jackbravo/simple-drupal-nginx\">https://github.com/jackbravo/simple-drupal-nginx</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">cd ~/work\ngit clone https://github.com/jackbravo/simple-drupal-nginx.git</code></pre>\n      </div>\n<p>Ahora ya podemos crear archivos de configuración para cada sitio de Drupal que queramos instalar. El primero puede ser así. Vamos a crear un archivo llamado <code class=\"language-text\">/etc/nginx/sites-available/sitio1.conf</code> con el siguiente contenido:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">server {\n  listen       80;\n  server_name  sitio1;\n  root         /home/usuario/work/drupal-sites/sitio1/drupal;\n  include      /home/usuario/work/simple-drupal-nginx/drupal.conf;\n}</code></pre>\n      </div>\n<p>Como podrás ver, el sitio tiene el nombre (<code class=\"language-text\">server_name</code>) de sitio1. Para que tu computadora pueda abrir ese sitio, necesitas decirle que cuando escribas sitio1 en tu navegador use la IP de tu computadora, para esto hay que editar el archivo <strong>/etc/hosts</strong> y agregar esta línea:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">127.0.0.1 sitio1</code></pre>\n      </div>\n<p>El archivo de configuración de nginx que creamos está en la carpeta <code class=\"language-text\">sites-available</code>. Para habilitarlo hay que hacer dos cosas. 1) crear un symlink a la carpeta <code class=\"language-text\">sites-enabled</code> y 2) reiniciar nginx:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">sudo ln -s /etc/nginx/sites-available/sitio1.conf /etc/nginx/sites-enabled/sitio1.conf\nsudo /etc/init.d/nginx reload</code></pre>\n      </div>\n<p><strong>Recuerda editar tu archivo /etc/hosts cada que agregas un nuevo sitio local</strong>.</p>\n<h2>Base de datos</h2>\n<p>Finalmente, antes de instalar necesitas tener una base de datos. Para poderlo hacer sigue los siguientes comandos dentro de mysql:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">mysql -u root\n&gt; create database sitio1; \n&gt; grant all on sitio1.* to usuario1@localhost identified by &#39;password del sitio 1&#39;;\n&gt; exit;</code></pre>\n      </div>\n<p>Listo, ya puedes entrar a tu navegador a <a href=\"http://sitio1\">http://sitio1</a> y continuar instalando tu primer sitio de drupal.</p>\n<h2>Opcional. Instalar fish</h2>\n<p><a href=\"https://github.com/fish-shell/fish-shell\">Fish</a> es una consola que puede reemplazar bash (la consola por default en linux). Tiene varias opciones como autocompletado y un historial de búsqueda muy chido. Este programa se compila para instalarse. Para todos los programas que compiles te recomendamos usar la carpeta /home/usuario/work/build</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">cd /home/usuario/work/build\ngit clone https://github.com/fish-shell/fish-shell.git\nsudo apt-get install build-essential autoconf libncurses5-dev libncursesw5-dev\ncd fish-shell\nautoconf\n./configure\nmake\nsudo make install</code></pre>\n      </div>\n<p>Para utilizar fish como tu consola principal necesitas agregarla al archivo <code class=\"language-text\">/etc/shells</code>. Ahí agrega esta línea:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">/usr/local/bin/fish</code></pre>\n      </div>\n<p>Y luego corre el siguiente comando para cambiar tu consola (chsh o change shell):</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">chsh -s /usr/local/bin/fish</code></pre>\n      </div>","fields":{"slug":"/setup-de-ambiente-de-desarrollo-ubuntu-debian/"},"frontmatter":{"title":"Setup de ambiente de desarrollo (ubuntu / debian)","date":"May 06, 2014","tags":[]}}},"pageContext":{"slug":"/setup-de-ambiente-de-desarrollo-ubuntu-debian/","previous":{"fields":{"slug":"/instalando-ledgersmb-en-ubuntu-1204-lts/"},"frontmatter":{"title":"Instalando LedgerSMB en ubuntu 12.04 LTS","aliases":[],"tags":["ubuntu"]}},"next":{"fields":{"slug":"/los-votos-de-liz-y-joaquin/"},"frontmatter":{"title":"Los votos de Liz y Joaquín","aliases":[],"tags":[]}}}}